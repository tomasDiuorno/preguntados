CREATE TABLE rol (
    id INT AUTO_INCREMENT PRIMARY KEY,
    descripcion VARCHAR(100) NOT NULL
);

CREATE TABLE usuario (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombreCompleto VARCHAR(100) NOT NULL,
    nombreDeUsuario VARCHAR(50) UNIQUE NOT NULL,
    mail VARCHAR(150) UNIQUE NOT NULL,
    contrasenia VARCHAR(255) NOT NULL,
    fechaNac INT,
    sexo VARCHAR(255),
    token VARCHAR(255),
    validado BOOLEAN DEFAULT FALSE,
    fotoDePerfil VARCHAR(255),
    direccion VARCHAR(255),
    rol_id INT,
	puntajeAcumulado INT NOT NULL DEFAULT 0,
    FOREIGN KEY (rol_id) REFERENCES rol(id)
);

CREATE TABLE partida (
    id INT AUTO_INCREMENT PRIMARY KEY,
    horaInicio DATETIME,
    horaFin DATETIME,
    puntaje INT DEFAULT 0,
	estado ENUM('En curso', 'Finalizada') NOT NULL
);

CREATE TABLE usuario_partida (
    usuario_id INT,
    partida_id INT,
    PRIMARY KEY (usuario_id, partida_id),
    FOREIGN KEY (usuario_id) REFERENCES usuario(id),
    FOREIGN KEY (partida_id) REFERENCES partida(id)
);

CREATE TABLE categoria (
    id INT AUTO_INCREMENT PRIMARY KEY,
    descripcion VARCHAR(100),
    color VARCHAR(30),
	imagen VARCHAR(255)
);

CREATE TABLE dificultad (
    id INT AUTO_INCREMENT PRIMARY KEY,
    descripcion VARCHAR(50)
);

CREATE TABLE IF NOT EXISTS pregunta (
    id INT AUTO_INCREMENT PRIMARY KEY,
    descripcion TEXT NOT NULL,
    aprobada TINYINT(1) NOT NULL DEFAULT 0, -- 0 es no, 1 es sí
    id_categoria INT NOT NULL,
    id_dificultad INT NOT NULL,
    FOREIGN KEY (id_categoria) REFERENCES categoria(id),
    FOREIGN KEY (id_dificultad) REFERENCES dificultad(id)
);

CREATE TABLE IF NOT EXISTS respuesta (
    id INT AUTO_INCREMENT PRIMARY KEY,
    descripcion VARCHAR(255) NOT NULL,
    es_correcta TINYINT(1) NOT NULL DEFAULT 0,
    id_pregunta INT NOT NULL,
    FOREIGN KEY (id_pregunta) REFERENCES pregunta(id) ON DELETE CASCADE
);

CREATE TABLE reporte (
    id INT AUTO_INCREMENT PRIMARY KEY,
    descripcion TEXT,
    pregunta_id INT,
    FOREIGN KEY (pregunta_id) REFERENCES pregunta(id)
);

CREATE TABLE usuario_pregunta (
    usuario_id INT,
    pregunta_id INT,
    PRIMARY KEY (usuario_id, pregunta_id),
    FOREIGN KEY (usuario_id) REFERENCES usuario(id),
    FOREIGN KEY (pregunta_id) REFERENCES pregunta(id)
);

INSERT INTO dificultad (descripcion) VALUES
('Fácil'), ('Medio'), ('Dificil');

INSERT INTO rol (descripcion) VALUES
('user'), ('editor'), ('admin');

INSERT INTO categoria (descripcion, color, imagen)
VALUES
('Deportes', '#F45D01', '/public/categorias/deportes.webp'),
('Historia', '#FFC857', '/public/categorias/historia.webp'),
('Entretenimiento', '#EA638C', '/public/categorias/entretenimiento.webp'),
('Ciencia', '#5EFC8D', '/public/categorias/ciencia.webp'),
('Geografía', '#0A81D1', '/public/categorias/geografia.webp');


INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿En qué año comenzó la Segunda Guerra Mundial?', 1, 2, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('1935', 0, 1),
('1939', 1, 1),
('1941', 0, 1),
('1945', 0, 1);

-- Pregunta 2 (Historia)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Quién fue el primer presidente de los Estados Unidos?', 1, 2, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Abraham Lincoln', 0, 2),
('George Washington', 1, 2),
('Thomas Jefferson', 0, 2),
('John Adams', 0, 2);

-- Pregunta 3 (Historia)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Qué civilización construyó las pirámides de Egipto?', 1, 2, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Romanos', 0, 3),
('Mayas', 0, 3),
('Egipcios', 1, 3),
('Griegos', 0, 3);

-- Pregunta 4 (Historia)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Quién descubrió América?', 1, 2, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Cristóbal Colón', 1, 4),
('Fernando de Magallanes', 0, 4),
('Hernán Cortés', 0, 4),
('Américo Vespucio', 0, 4);

-- Pregunta 5 (Historia)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Qué muro cayó en 1989 marcando el fin de la Guerra Fría?', 1, 2, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Muro de Berlín', 1, 5),
('Muro de México', 0, 5),
('Muro de Roma', 0, 5),
('Muro de China', 0, 5);

-- Pregunta 6 (Deportes)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Cuántos jugadores conforman un equipo de fútbol en el campo?', 1, 1, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('9', 0, 6),
('10', 0, 6),
('11', 1, 6),
('12', 0, 6);

-- Pregunta 7 (Deportes)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿En qué país se originó el tenis?', 1, 1, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Francia', 0, 7),
('Inglaterra', 1, 7),
('Estados Unidos', 0, 7),
('España', 0, 7);

-- Pregunta 8 (Deportes)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Qué selección ganó el Mundial de Fútbol 2022?', 1, 1, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Francia', 0, 8),
('Brasil', 0, 8),
('Argentina', 1, 8),
('Alemania', 0, 8);

-- Pregunta 9 (Deportes)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Cuántos puntos vale un triple en básquet?', 1, 1, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('2', 0, 9),
('3', 1, 9),
('4', 0, 9),
('5', 0, 9);

-- Pregunta 10 (Deportes)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿En qué año se celebraron los primeros Juegos Olímpicos modernos?', 1, 1, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('1896', 1, 10),
('1900', 0, 10),
('1924', 0, 10),
('1948', 0, 10);

-- Pregunta 11 (Cine)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Quién interpreta a Iron Man en el Universo Marvel?', 1, 3, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Chris Evans', 0, 11),
('Robert Downey Jr.', 1, 11),
('Chris Hemsworth', 0, 11),
('Mark Ruffalo', 0, 11);

-- Pregunta 12 (Cine)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Qué película ganó el Oscar a Mejor Película en 1998?', 1, 3, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Titanic', 1, 12),
('Matrix', 0, 12),
('Gladiador', 0, 12),
('El Padrino', 0, 12);

-- Pregunta 13 (Cine)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Quién dirigió "Jurassic Park"?', 1, 3, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('James Cameron', 0, 13),
('Steven Spielberg', 1, 13),
('Ridley Scott', 0, 13),
('Tim Burton', 0, 13);

-- Pregunta 14 (Cine)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Cuál es la saga cinematográfica más taquillera?', 1, 3, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Harry Potter', 0, 14),
('Star Wars', 0, 14),
('Avatar', 0, 14),
('Marvel Cinematic Universe', 1, 14);

-- Pregunta 15 (Cine)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿En qué año se estrenó “El Señor de los Anillos: La Comunidad del Anillo”?', 1, 3, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('1999', 0, 15),
('2001', 1, 15),
('2003', 0, 15),
('2005', 0, 15);

-- Pregunta 16 (Ciencia)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Cuál es el planeta más grande del sistema solar?', 1, 4, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Saturno', 0, 16),
('Marte', 0, 16),
('Júpiter', 1, 16),
('Neptuno', 0, 16);

-- Pregunta 17 (Ciencia)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Qué gas respiramos los seres humanos?', 1, 4, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Dióxido de carbono', 0, 17),
('Nitrógeno', 0, 17),
('Oxígeno', 1, 17),
('Helio', 0, 17);

-- Pregunta 18 (Ciencia)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Cuál es el símbolo químico del agua?', 1, 4, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('O2', 0, 18),
('H2O', 1, 18),
('CO2', 0, 18),
('NaCl', 0, 18);

-- Pregunta 19 (Ciencia)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Qué científico propuso la teoría de la relatividad?', 1, 4, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Newton', 0, 19),
('Einstein', 1, 19),
('Tesla', 0, 19),
('Bohr', 0, 19);

-- Pregunta 20 (Ciencia)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Cuál es la velocidad de la luz?', 1, 4, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('300.000 km/s', 1, 20),
('150.000 km/s', 0, 20),
('3.000 km/s', 0, 20),
('30.000 km/s', 0, 20);

-- Pregunta 21 (Geografía)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Cuál es el río más largo del mundo?', 1, 5, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Nilo', 0, 21),
('Amazonas', 1, 21),
('Misisipi', 0, 21),
('Congo', 0, 21);

-- Pregunta 22 (Geografía)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿Cuál es la capital de Australia?', 1, 5, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Sídney', 0, 22),
('Melbourne', 0, 22),
('Canberra', 1, 22),
('Perth', 0, 22);

-- Pregunta 23 (Geografía)
INSERT INTO pregunta (descripcion, aprobada, id_categoria, id_dificultad) VALUES ('¿En qué continente se encuentra el Desierto del Sahara?', 1, 5, 1);
INSERT INTO respuesta (descripcion, es_correcta, id_pregunta) VALUES
('Asia', 0, 23),
('Oceanía', 0, 23),
('América del Sur', 0, 23),
('África', 1, 23);
